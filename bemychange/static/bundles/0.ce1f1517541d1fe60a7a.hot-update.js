webpackHotUpdate_name_(0,{

/***/ 73:
/* unknown exports provided */
/* all exports used */
/*!******************************************************!*\
  !*** ./src/actions/currentActions/currentActions.js ***!
  \******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(/*! ../utils */ 29);\n\nvar _fr = __webpack_require__(/*! flatpickr/dist/l10n/fr.js */ 72);\n\nvar _simpledomComponent = __webpack_require__(/*! simpledom-component */ 1);\n\nvar SimpleDom = _interopRequireWildcard(_simpledomComponent);\n\nvar _veil = __webpack_require__(/*! ../../components/veil/veil */ 4);\n\nvar _sidebarActions = __webpack_require__(/*! ../sidebarActions/sidebarActions */ 44);\n\nvar _step = __webpack_require__(/*! ../createAction/step1 */ 41);\n\nvar _actionCard = __webpack_require__(/*! ../actionCard/actionCard */ 76);\n\nvar _animejs = __webpack_require__(/*! animejs */ 75);\n\nvar _animejs2 = _interopRequireDefault(_animejs);\n\n__webpack_require__(/*! ../../css/popovers.less */ 12);\n\n__webpack_require__(/*! ../../css/avatar.less */ 30);\n\n__webpack_require__(/*! ./currentActions.less */ 80);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(/*! ../../home */ 3);\nvar moment = __webpack_require__(/*! moment */ 5);\n__webpack_require__(/*! moment/locale/fr */ 9);\nvar flatpickr = __webpack_require__(/*! flatpickr */ 36);\n\nflatpickr.localize(_fr.French);\n\nvar ActionsList = function (_SimpleDom$Component) {\n    _inherits(ActionsList, _SimpleDom$Component);\n\n    _createClass(ActionsList, [{\n        key: 'eventsToSubscribe',\n        value: function eventsToSubscribe() {\n            return ['ACTIONS_LIST_TO_UPDATE'];\n        }\n    }]);\n\n    function ActionsList(props, store) {\n        _classCallCheck(this, ActionsList);\n\n        return _possibleConstructorReturn(this, (ActionsList.__proto__ || Object.getPrototypeOf(ActionsList)).call(this, props, store));\n    }\n\n    _createClass(ActionsList, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var allCallbacks = (0, _animejs2.default)({\n                targets: '.card',\n                opacity: 1,\n                delay: function delay(el, i) {\n                    return 100 + i * 100;\n                },\n                duration: function duration(el, i) {\n                    return 500 + i * 500;\n                }\n            });\n        }\n    }, {\n        key: 'partitionList',\n        value: function partitionList(input, spacing) {\n            var output = [];\n            for (var i = 0; i < input.length; i += spacing) {\n                output[output.length] = input.slice(i, i + spacing);\n            }\n            return output;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var nbActions = this.state.minisidebar ? 4 : 3;\n            var colSize = this.state.minisidebar ? 'm3' : 'm4';\n            if (!(this.state.selectedActions || []).length) {\n                return SimpleDom.el(\n                    'section',\n                    { 'class': 'empty' },\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'empty-icon' },\n                        SimpleDom.el('i', { 'class': 'lnr lnr-rocket fa-3x' })\n                    ),\n                    SimpleDom.el(\n                        'h4',\n                        { 'class': 'empty-title' },\n                        'Pas d\\'action ici...'\n                    ),\n                    SimpleDom.el(\n                        'p',\n                        { 'class': 'empty-subtitle' },\n                        'Rechercher une action qui vous correspond',\n                        SimpleDom.el(\n                            'a',\n                            { href: '#createAction',\n                                onclick: function onclick() {\n                                    $('#createAction').modal({\n                                        startingTop: '2%'\n                                    });\n                                }\n                            },\n                            ' ici'\n                        ),\n                        ' !'\n                    )\n                );\n            }\n            return SimpleDom.el(\n                'div',\n                { id: 'actions-card' },\n                this.partitionList(this.state.selectedActions || [], nbActions).map(function (subactions) {\n                    return SimpleDom.el(\n                        'div',\n                        { 'class': 'row' },\n                        subactions.map(function (action) {\n                            return SimpleDom.el(\n                                'div',\n                                { 'class': 'col ' + colSize + ' s12' },\n                                SimpleDom.el(_actionCard.ActionCard, { userAction: action })\n                            );\n                        })\n                    );\n                })\n            );\n        }\n    }]);\n\n    return ActionsList;\n}(SimpleDom.Component);\n\nvar MainTitle = function (_SimpleDom$Component2) {\n    _inherits(MainTitle, _SimpleDom$Component2);\n\n    function MainTitle() {\n        _classCallCheck(this, MainTitle);\n\n        return _possibleConstructorReturn(this, (MainTitle.__proto__ || Object.getPrototypeOf(MainTitle)).apply(this, arguments));\n    }\n\n    _createClass(MainTitle, [{\n        key: 'eventsToSubscribe',\n        value: function eventsToSubscribe() {\n            return ['TITLE_TO_REFRESH'];\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            tippy('.add-action', {\n                html: document.querySelector('#eventOrNot'),\n                arrow: true,\n                distance: 15,\n                trigger: 'click',\n                interactive: true\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return SimpleDom.el(\n                'h1',\n                { 'class': 'main-title' },\n                'Mes actions en cours (',\n                (this.state.selectedActions || []).length,\n                ')',\n                SimpleDom.el(\n                    'div',\n                    { id: 'eventOrNot' },\n                    SimpleDom.el(\n                        'button',\n                        { 'class': 'btn' },\n                        'Cr\\xE9er une nouvelle action'\n                    ),\n                    SimpleDom.el(\n                        'button',\n                        { 'class': 'btn' },\n                        'Cr\\xE9er un nouvel \\xE9v\\xE8nement'\n                    )\n                ),\n                SimpleDom.el(\n                    'span',\n                    { href: '#', 'class': 'right hbtn-action hbtn-main-color add-action',\n                        title: 'Hello world'\n                    },\n                    SimpleDom.el(\n                        'i',\n                        { 'class': 'material-icons white-text' },\n                        'add'\n                    )\n                )\n            );\n        }\n    }]);\n\n    return MainTitle;\n}(SimpleDom.Component);\n\nvar App = function (_SimpleDom$Component3) {\n    _inherits(App, _SimpleDom$Component3);\n\n    function App() {\n        _classCallCheck(this, App);\n\n        return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n    }\n\n    _createClass(App, [{\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            return SimpleDom.el(\n                'div',\n                { id: 'top', 'class': 'action' },\n                SimpleDom.el(\n                    'div',\n                    { id: 'createAction', 'class': 'modal', style: 'display: none' },\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'modal-content' },\n                        SimpleDom.el(_step.CreateAction, null)\n                    )\n                ),\n                SimpleDom.el(\n                    'div',\n                    { 'class': 'boxed-layout' },\n                    SimpleDom.el(_sidebarActions.SidebarAction, null),\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'row' },\n                        SimpleDom.el(\n                            'div',\n                            { id: 'actions', 'class': 'col s12' },\n                            SimpleDom.el(MainTitle, null),\n                            SimpleDom.el('hr', null),\n                            SimpleDom.el(\n                                'div',\n                                { 'class': 'row action-filter' },\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'action-date-picker input-field' },\n                                    SimpleDom.el('i', { 'class': 'lnr lnr-calendar-full prefix' }),\n                                    SimpleDom.el('input', { 'class': 'flatpicker', type: 'date' })\n                                ),\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'action-search input-field' },\n                                    SimpleDom.el('i', { 'class': 'lnr lnr-magnifier prefix' }),\n                                    SimpleDom.el('input', { type: 'search', onkeyup: function onkeyup(event) {\n                                            var name = event.target.value.toLowerCase();\n                                            var newSelectedActions = [];\n                                            if (!name) {\n                                                newSelectedActions = _this4.state.actions;\n                                            } else {\n                                                newSelectedActions = _this4.state.selectedActions.filter(function (userAction) {\n                                                    var parentAction = userAction.action;\n                                                    return parentAction.title.toLowerCase().includes(name) || parentAction.description.toLowerCase().includes(name);\n                                                });\n                                            }\n                                            // update sidebar\n                                            _this4.store.updateState({\n                                                selectedActions: newSelectedActions\n                                            }, 'ACTIONS_LIST_TO_UPDATE', 'MAIN_TITLE_TO_UPDATE');\n                                        } })\n                                )\n                            ),\n                            SimpleDom.el(\n                                'div',\n                                { 'class': 'row' },\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'col s12' },\n                                    SimpleDom.el(ActionsList, null)\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return App;\n}(SimpleDom.Component);\n\n$(document).ready(function () {\n\n    var store = new SimpleDom.Store();\n\n    store.subscribe('ACTION_VIEW_TO_UPDATE', function (state, oldState) {\n        // TODO refactor a bit this shit\n        var newSelectedActions = !store.state.selectedTagSlug ? store.actions : store.state.actions.filter(function (action) {\n            var splitted = store.state.selectedTagSlug.split('-');\n            var splittedTag = action.tag.split('-');\n            var i = 0;\n            while (i < splitted.length && i < splittedTag.length) {\n                if (splitted[i] !== splittedTag[i]) {\n                    return false;\n                }\n                ++i;\n            }\n            return true;\n        });\n\n        store.updateState({\n            selectedActions: newSelectedActions\n        }, 'ACTIONS_LIST_TO_UPDATE', 'MAIN_TITLE_TO_UPDATE');\n    });\n\n    (0, _veil.withVeilAndMessages)(Promise.all([fetchJsonData('/users/actions/get'), fetchJsonData('/users/tags/all')]), true).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            _ref2$ = _ref2[0],\n            actions = _ref2$.actions,\n            counting = _ref2$.counting,\n            tags = _ref2[1];\n\n        (0, _utils.fillUptag)(tags);\n        var countByTagSlug = {};\n        (0, _utils.getTagsNumber)(actions, countByTagSlug);\n        store.updateState({\n            actions: actions,\n            countByTagSlug: countByTagSlug,\n            selectedActions: actions.slice(),\n            selectedDate: moment(new Date()).format('YYYY-MM-DD'),\n            tags: tags,\n            activeTags: new Set(),\n            actionsDataCount: counting\n        });\n\n        SimpleDom.renderToDom('container', SimpleDom.el(App, null), store);\n\n        // jquery functions\n        flatpickr('.flatpicker', {\n            altInput: true,\n            altFormat: 'l d F Y',\n            defaultDate: new Date(),\n            onChange: function onChange(_, date) {\n                (0, _veil.withVeilAndMessages)(fetchJsonData('/users/actions/get?date=' + moment(date).format('YYYY-MM-DD')), true).then(function (_ref3) {\n                    var actions = _ref3.actions,\n                        counting = _ref3.counting;\n\n                    var countByTagSlug = {};\n                    (0, _utils.getTagsNumber)(actions, countByTagSlug);\n\n                    store.updateState({\n                        actions: actions,\n                        countByTagSlug: countByTagSlug,\n                        selectedActions: actions.slice(),\n                        actionsDataCount: counting,\n                        selectedDate: date }, 'ACTIONS_LIST_TO_UPDATE', 'SIDEBAR_TO_UPDATE');\n                });\n            }\n        });\n    });\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2FjdGlvbnMvY3VycmVudEFjdGlvbnMvY3VycmVudEFjdGlvbnMuanM/ZmEyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ZpbGxVcHRhZywgZ2V0VGFnc051bWJlcn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbnJlcXVpcmUoJy4uLy4uL2hvbWUnKTtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xucmVxdWlyZSgnbW9tZW50L2xvY2FsZS9mcicpO1xuY29uc3QgZmxhdHBpY2tyID0gcmVxdWlyZShcImZsYXRwaWNrclwiKTtcbmltcG9ydCB7IEZyZW5jaCB9IGZyb20gXCJmbGF0cGlja3IvZGlzdC9sMTBuL2ZyLmpzXCJcbmZsYXRwaWNrci5sb2NhbGl6ZShGcmVuY2gpO1xuXG5pbXBvcnQgKiBhcyBTaW1wbGVEb20gZnJvbSAnc2ltcGxlZG9tLWNvbXBvbmVudCc7XG5pbXBvcnQgeyB3aXRoVmVpbEFuZE1lc3NhZ2VzIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy92ZWlsL3ZlaWwnO1xuaW1wb3J0IHtTaWRlYmFyQWN0aW9ufSBmcm9tICcuLi9zaWRlYmFyQWN0aW9ucy9zaWRlYmFyQWN0aW9ucyc7XG5pbXBvcnQge0NyZWF0ZUFjdGlvbn0gZnJvbSAnLi4vY3JlYXRlQWN0aW9uL3N0ZXAxJztcbmltcG9ydCB7QWN0aW9uQ2FyZH0gZnJvbSBcIi4uL2FjdGlvbkNhcmQvYWN0aW9uQ2FyZFwiO1xuaW1wb3J0IGFuaW1lIGZyb20gJ2FuaW1lanMnXG5cbmltcG9ydCAnLi4vLi4vY3NzL3BvcG92ZXJzLmxlc3MnO1xuaW1wb3J0ICcuLi8uLi9jc3MvYXZhdGFyLmxlc3MnO1xuaW1wb3J0ICcuL2N1cnJlbnRBY3Rpb25zLmxlc3MnO1xuXG5cbmNsYXNzIEFjdGlvbnNMaXN0IGV4dGVuZHMgU2ltcGxlRG9tLkNvbXBvbmVudCB7XG4gICAgZXZlbnRzVG9TdWJzY3JpYmUoKSB7XG4gICAgICAgIHJldHVybiBbJ0FDVElPTlNfTElTVF9UT19VUERBVEUnXTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgc3RvcmUpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0b3JlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgYWxsQ2FsbGJhY2tzID0gYW5pbWUoe1xuICAgICAgICAgICAgdGFyZ2V0czogJy5jYXJkJyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkZWxheTogZnVuY3Rpb24oZWwsIGkpIHsgcmV0dXJuIDEwMCArIChpICogMTAwKTsgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBmdW5jdGlvbihlbCwgaSkgeyByZXR1cm4gNTAwICsgKGkgKiA1MDApOyB9XG4gICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFydGl0aW9uTGlzdChpbnB1dCwgc3BhY2luZykge1xuICAgICAgICBsZXQgb3V0cHV0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IHNwYWNpbmcpIHtcbiAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoXSA9IGlucHV0LnNsaWNlKGksIGkgKyBzcGFjaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgIGNvbnN0IG5iQWN0aW9ucyA9IHRoaXMuc3RhdGUubWluaXNpZGViYXIgPyA0IDogMztcbiAgICAgICAgY29uc3QgY29sU2l6ZSA9IHRoaXMuc3RhdGUubWluaXNpZGViYXIgPyAgJ20zJyA6ICdtNCc7XG4gICAgICAgIGlmICghKHRoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb25zIHx8IFtdKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJlbXB0eVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJsbnIgbG5yLXJvY2tldCBmYS0zeFwiLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImVtcHR5LXRpdGxlXCI+UGFzIGQnYWN0aW9uIGljaS4uLjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZW1wdHktc3VidGl0bGVcIj5SZWNoZXJjaGVyIHVuZSBhY3Rpb24gcXVpIHZvdXMgY29ycmVzcG9uZFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNjcmVhdGVBY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjcmVhdGVBY3Rpb24nKS5tb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0aW5nVG9wOiAnMiUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPiBpY2lcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4gIVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gPGRpdiBpZD1cImFjdGlvbnMtY2FyZFwiPlxuICAgICAgICAgICAge3RoaXMucGFydGl0aW9uTGlzdCh0aGlzLnN0YXRlLnNlbGVjdGVkQWN0aW9ucyB8fCBbXSwgbmJBY3Rpb25zKS5tYXAoc3ViYWN0aW9ucyA9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAge3N1YmFjdGlvbnMubWFwKGFjdGlvbiA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz17YGNvbCAke2NvbFNpemV9IHMxMmB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY3Rpb25DYXJkIHVzZXJBY3Rpb249e2FjdGlvbn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuXG5cbmNsYXNzIE1haW5UaXRsZSBleHRlbmRzIFNpbXBsZURvbS5Db21wb25lbnQge1xuICAgIGV2ZW50c1RvU3Vic2NyaWJlKCkge1xuICAgICAgICByZXR1cm4gWydUSVRMRV9UT19SRUZSRVNIJ107XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRpcHB5KCcuYWRkLWFjdGlvbicsIHtcbiAgICAgICAgICAgIGh0bWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNldmVudE9yTm90JyksXG4gICAgICAgICAgICBhcnJvdzogdHJ1ZSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiAxNSxcbiAgICAgICAgICAgIHRyaWdnZXI6ICdjbGljaycsXG4gICAgICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8aDEgY2xhc3M9XCJtYWluLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgTWVzIGFjdGlvbnMgZW4gY291cnMgKHsodGhpcy5zdGF0ZS5zZWxlY3RlZEFjdGlvbnMgfHwgW10pLmxlbmd0aH0pXG5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZXZlbnRPck5vdFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuXCI+Q3LDqWVyIHVuZSBub3V2ZWxsZSBhY3Rpb248L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiPkNyw6llciB1biBub3V2ZWwgw6l2w6huZW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBocmVmPVwiI1wiIGNsYXNzPVwicmlnaHQgaGJ0bi1hY3Rpb24gaGJ0bi1tYWluLWNvbG9yIGFkZC1hY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiSGVsbG8gd29ybGRcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyB3aGl0ZS10ZXh0XCI+YWRkPC9pPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cbmNsYXNzIEFwcCBleHRlbmRzIFNpbXBsZURvbS5Db21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ0b3BcIiBjbGFzcz1cImFjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJjcmVhdGVBY3Rpb25cIiBjbGFzcz1cIm1vZGFsXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q3JlYXRlQWN0aW9uIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib3hlZC1sYXlvdXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPFNpZGViYXJBY3Rpb24gLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImFjdGlvbnNcIiBjbGFzcz1cImNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFpblRpdGxlLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgYWN0aW9uLWZpbHRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLWRhdGUtcGlja2VyIGlucHV0LWZpZWxkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImxuciBsbnItY2FsZW5kYXItZnVsbCBwcmVmaXhcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZsYXRwaWNrZXJcIiB0eXBlPVwiZGF0ZVwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tc2VhcmNoIGlucHV0LWZpZWxkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImxuciBsbnItbWFnbmlmaWVyIHByZWZpeFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBvbmtleXVwPXtldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGV2ZW50LnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdTZWxlY3RlZEFjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWRBY3Rpb25zID0gdGhpcy5zdGF0ZS5hY3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdGVkQWN0aW9ucyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb25zLmZpbHRlcih1c2VyQWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEFjdGlvbiA9IHVzZXJBY3Rpb24uYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudEFjdGlvbi50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRBY3Rpb24uZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHNpZGViYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRBY3Rpb25zOiBuZXdTZWxlY3RlZEFjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAnQUNUSU9OU19MSVNUX1RPX1VQREFURScsICdNQUlOX1RJVExFX1RPX1VQREFURScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY3Rpb25zTGlzdCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICBjb25zdCBzdG9yZSA9IG5ldyBTaW1wbGVEb20uU3RvcmUoKTtcblxuICAgIHN0b3JlLnN1YnNjcmliZSgnQUNUSU9OX1ZJRVdfVE9fVVBEQVRFJywgKHN0YXRlLCBvbGRTdGF0ZSkgPT4ge1xuICAgICAgICAvLyBUT0RPIHJlZmFjdG9yIGEgYml0IHRoaXMgc2hpdFxuICAgICAgICBjb25zdCBuZXdTZWxlY3RlZEFjdGlvbnMgPSAhc3RvcmUuc3RhdGUuc2VsZWN0ZWRUYWdTbHVnID8gc3RvcmUuYWN0aW9uc1xuICAgICAgICAgICAgOiBzdG9yZS5zdGF0ZS5hY3Rpb25zLmZpbHRlcihhY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0dGVkID0gc3RvcmUuc3RhdGUuc2VsZWN0ZWRUYWdTbHVnLnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXR0ZWRUYWcgPSBhY3Rpb24udGFnLnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgc3BsaXR0ZWQubGVuZ3RoICYmIGkgPCBzcGxpdHRlZFRhZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0dGVkW2ldICE9PSBzcGxpdHRlZFRhZ1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBzdG9yZS51cGRhdGVTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZEFjdGlvbnM6IG5ld1NlbGVjdGVkQWN0aW9uc1xuICAgICAgICB9LCAnQUNUSU9OU19MSVNUX1RPX1VQREFURScsICdNQUlOX1RJVExFX1RPX1VQREFURScpO1xuICAgIH0pO1xuXG4gICAgd2l0aFZlaWxBbmRNZXNzYWdlcyhcbiAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgZmV0Y2hKc29uRGF0YSgnL3VzZXJzL2FjdGlvbnMvZ2V0JyksXG4gICAgICAgICAgICBmZXRjaEpzb25EYXRhKCcvdXNlcnMvdGFncy9hbGwnKVxuICAgICAgICBdKSxcbiAgICAgICAgdHJ1ZSlcbiAgICAgICAgLnRoZW4oKFt7YWN0aW9ucywgY291bnRpbmd9LCB0YWdzXSkgPT4ge1xuICAgICAgICAgICAgZmlsbFVwdGFnKHRhZ3MpO1xuICAgICAgICAgICAgY29uc3QgY291bnRCeVRhZ1NsdWcgPSB7fTtcbiAgICAgICAgICAgIGdldFRhZ3NOdW1iZXIoYWN0aW9ucywgY291bnRCeVRhZ1NsdWcpO1xuICAgICAgICAgICAgc3RvcmUudXBkYXRlU3RhdGUoeyBcbiAgICAgICAgICAgICAgICBhY3Rpb25zLFxuICAgICAgICAgICAgICAgIGNvdW50QnlUYWdTbHVnLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQWN0aW9uczogYWN0aW9ucy5zbGljZSgpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZTogbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgnWVlZWS1NTS1ERCcpLFxuICAgICAgICAgICAgICAgIHRhZ3MsXG4gICAgICAgICAgICAgICAgYWN0aXZlVGFnczogbmV3IFNldCgpLFxuICAgICAgICAgICAgICAgIGFjdGlvbnNEYXRhQ291bnQ6IGNvdW50aW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU2ltcGxlRG9tLnJlbmRlclRvRG9tKCdjb250YWluZXInLCA8QXBwIC8+LCBzdG9yZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGpxdWVyeSBmdW5jdGlvbnNcbiAgICAgICAgICAgIGZsYXRwaWNrcignLmZsYXRwaWNrZXInLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0SW5wdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFsdEZvcm1hdDogJ2wgZCBGIFknLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChfLCBkYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoVmVpbEFuZE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoSnNvbkRhdGEoYC91c2Vycy9hY3Rpb25zL2dldD9kYXRlPSR7bW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpfWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICkudGhlbigoe2FjdGlvbnMsIGNvdW50aW5nfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50QnlUYWdTbHVnID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VGFnc051bWJlcihhY3Rpb25zLCBjb3VudEJ5VGFnU2x1Zyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS51cGRhdGVTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50QnlUYWdTbHVnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEFjdGlvbnM6IGFjdGlvbnMuc2xpY2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uc0RhdGFDb3VudDogY291bnRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZTogZGF0ZSB9LCAnQUNUSU9OU19MSVNUX1RPX1VQREFURScsICdTSURFQkFSX1RPX1VQREFURScpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvYWN0aW9ucy9jdXJyZW50QWN0aW9ucy9jdXJyZW50QWN0aW9ucy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYUE7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSkE7QUFNQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQUFBO0FBQUE7QUFEQTtBQUFBO0FBTEE7QUFpQkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBREE7QUFEQTtBQURBO0FBV0E7Ozs7QUE1REE7QUFDQTtBQStEQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFIQTtBQVBBO0FBY0E7Ozs7QUEvQkE7QUFDQTtBQWtDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBbkJBO0FBTkE7QUE0QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBL0JBO0FBREE7QUFGQTtBQU5BO0FBa0RBOzs7O0FBckRBO0FBQ0E7QUF1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFzQkE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ })

})