webpackHotUpdate_name_(0,{

/***/ 77:
/* unknown exports provided */
/* all exports used */
/*!**********************************************!*\
  !*** ./src/actions/actionCard/actionCard.js ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ActionCard = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(/*! ../utils */ 11);\n\nvar _simpledomComponent = __webpack_require__(/*! simpledom-component */ 1);\n\nvar SimpleDom = _interopRequireWildcard(_simpledomComponent);\n\nvar _veil = __webpack_require__(/*! ../../components/veil/veil */ 4);\n\nvar _slider = __webpack_require__(/*! ../../components/slider/slider */ 46);\n\nvar _commentaries = __webpack_require__(/*! ../commentaries/commentaries */ 43);\n\nvar _participants = __webpack_require__(/*! ../participants/participants */ 44);\n\nvar _tagSelector = __webpack_require__(/*! ../tagSelector/tagSelector */ 32);\n\nvar _ressources = __webpack_require__(/*! ../ressources/ressources */ 80);\n\nvar _actionInfoSlider = __webpack_require__(/*! ../actionInfoSlider/actionInfoSlider */ 78);\n\n__webpack_require__(/*! ../../css/popovers.less */ 9);\n\n__webpack_require__(/*! ../../css/avatar.less */ 28);\n\n__webpack_require__(/*! ./actionCard.less */ 81);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(/*! ../../home */ 3);\nvar moment = __webpack_require__(/*! moment */ 5);\n__webpack_require__(/*! moment/locale/fr */ 6);\nvar flatpickr = __webpack_require__(/*! flatpickr */ 29);\nvar francese = __webpack_require__(/*! flatpickr/dist/l10n/fr.js */ 73).fr;\nflatpickr.localize(francese);\n\nvar ActionCard = exports.ActionCard = function (_SimpleDom$Component) {\n    _inherits(ActionCard, _SimpleDom$Component);\n\n    _createClass(ActionCard, [{\n        key: 'eventsToSubscribe',\n        value: function eventsToSubscribe() {\n            return ['ACTION_CARD_RELOAD_' + this.props.userAction.id];\n        }\n    }]);\n\n    function ActionCard(props, store) {\n        _classCallCheck(this, ActionCard);\n\n        var _this = _possibleConstructorReturn(this, (ActionCard.__proto__ || Object.getPrototypeOf(ActionCard)).call(this, props, store));\n\n        _this.userAction = _this.props.userAction;\n        _this.card = undefined;\n        _this.hasBeenRealised = undefined;\n        return _this;\n    }\n\n    _createClass(ActionCard, [{\n        key: 'getFullTag',\n        value: function getFullTag() {\n            console.log(this.userAction.tags);\n            var userActionTags = this.userAction.tag.split('-');\n            var tags = this.state.tags.slice();\n            var result = [];\n\n            var _loop = function _loop() {\n                var currTag = userActionTags.shift();\n                var targetTag = tags.find(function (tag) {\n                    return '' + tag.id === currTag;\n                });\n                result.push(targetTag.name);\n                if (targetTag && targetTag.sons) {\n                    tags = targetTag.sons;\n                    return 'continue';\n                }\n                return 'break';\n            };\n\n            _loop2: while (userActionTags.length) {\n                var _ret = _loop();\n\n                switch (_ret) {\n                    case 'continue':\n                        continue;\n\n                    case 'break':\n                        break _loop2;}\n            }\n\n            return result.join('/');\n        }\n    }, {\n        key: 'getUserActionProgress',\n        value: function getUserActionProgress() {\n            var allDays = moment(this.userAction.start_date).diff(this.userAction.end_date, 'days');\n            var days = moment(this.userAction.start_date).diff(moment.now(), 'days');\n            var percent = Math.trunc(days / allDays * 100);\n            console.log(percent);\n            return Math.min(100, percent);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var style = this.hasBeenRealised ? { 'opacity': '0' } : undefined;\n            return SimpleDom.el(\n                'div',\n                null,\n                SimpleDom.el(\n                    'div',\n                    { id: 'card-edit-tag-' + this.userAction.id, 'class': 'modal' },\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'modal-content' },\n                        SimpleDom.el(\n                            'h4',\n                            null,\n                            'Changer de tag'\n                        ),\n                        SimpleDom.el(_tagSelector.TagSelector, { tags: this.getFullTag() })\n                    ),\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'modal-footer' },\n                        SimpleDom.el(\n                            'div',\n                            { 'class': 'right' },\n                            SimpleDom.el(\n                                'a',\n                                { href: '#', 'class': 'hbtn', style: 'margin-right: 10px; margin-top: -10px;',\n                                    onclick: function onclick(e) {\n                                        //e.preventDefault();\n                                        $('#card-edit-tag-' + _this2.userAction.id).modal('close');\n                                        var result = (0, _utils.updateSidebarTags)(_this2.state);\n                                        (0, _veil.withVeilAndMessages)(window.fetchJsonData('/users/tags/change-tag/' + _this2.userAction.id, {\n                                            method: 'POST',\n                                            body: JSON.stringify({\n                                                tagsToCreate: result.tagsToCreate,\n                                                tagsSlug: result.tagsSlug\n                                            })\n                                        }), true).then(function (_ref) {\n                                            var tags = _ref.tags,\n                                                user_action = _ref.user_action;\n\n                                            _this2.userAction.tag = user_action.tag;\n                                            (0, _utils.fillUptag)(tags);\n                                            var countByTagSlug = {};\n                                            //test if the user has participated into the action\n                                            // add maybe user action ?\n                                            (0, _utils.getTagsNumber)(_this2.state.actions, countByTagSlug);\n\n                                            _this2.store.updateState({\n                                                tags: tags,\n                                                countByTagSlug: countByTagSlug\n                                            }, 'SIDEBAR_TO_UPDATE', 'ACTIONS_LIST_TO_UPDATE', 'TITLE_TO_REFRESH');\n                                        });\n                                    }\n                                },\n                                'Valider'\n                            )\n                        )\n                    )\n                ),\n                SimpleDom.el(\n                    'div',\n                    { 'class': 'card my-card', style: { 'opacity': this.hasBeenRealised ? '1' : '0' }, ref: function ref(_ref3) {\n                            return _this2.card = _ref3;\n                        } },\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'hbtn-action my-card-delete',\n                            onclick: function onclick() {\n                                (0, _veil.withVeilAndMessages)(window.fetchJsonData('/users/actions/user-action/delete/' + _this2.userAction.id, { method: 'DELETE' }), true).then(function () {\n                                    _this2.card.classList.toggle('to-be-deleted');\n                                    setTimeout(function () {\n                                        var selectedActions = _this2.state.selectedActions.filter(function (action) {\n                                            return action.id !== _this2.userAction.id;\n                                        });\n                                        var actions = _this2.state.selectedActions.filter(function (action) {\n                                            return action.id !== _this2.userAction.id;\n                                        });\n                                        var countByTagSlug = {};\n                                        (0, _utils.getTagsNumber)(actions, countByTagSlug);\n\n                                        _this2.store.updateState({\n                                            actions: actions,\n                                            selectedActions: selectedActions,\n                                            countByTagSlug: countByTagSlug\n                                        }, 'SIDEBAR_TO_UPDATE', 'ACTIONS_LIST_TO_UPDATE', 'TITLE_TO_REFRESH');\n                                    }, 600);\n                                });\n                            }\n                        },\n                        '\\u2715'\n                    ),\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'card-image waves-block waves-light' },\n                        SimpleDom.predicate(this.userAction.action.image_url, function () {\n                            return SimpleDom.el(\n                                'a',\n                                { 'data-fancybox': true,\n                                    'data-caption': _this2.userAction.action.title,\n                                    href: _this2.userAction.action.image_url },\n                                SimpleDom.el('img', { 'class': 'lozad', src: _this2.userAction.action.image_url }),\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'card-image-tag',\n                                        onclick: function onclick(e) {\n                                            e.preventDefault();\n                                            e.stopPropagation();\n                                            $('#card-edit-tag-' + _this2.userAction.id).modal('open');\n                                        } },\n                                    _this2.getFullTag()\n                                )\n                            );\n                        })\n                    ),\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'card-content', 'data-tooltip': this.userAction.action.title },\n                        SimpleDom.el(\n                            'span',\n                            { 'class': 'card-title', style: 'font-size: 1.3em;',\n                                onclick: function onclick(event) {\n                                    (0, _veil.withVeilAndMessages)(fetchJsonData('/users/actions/' + _this2.userAction.action_id + '/commentaries?is_journal=True'), true).then(function (commentaries) {\n                                        (0, _slider.createSlider)('', SimpleDom.el(_actionInfoSlider.ActionInfo, {\n                                            userAction: _this2.userAction,\n                                            tags: _this2.state.tags,\n                                            journalEntries: commentaries\n                                        }), event, '');\n                                    });\n                                }\n                            },\n                            ActionCard.cropTitle(this.userAction.action.title, 40)\n                        ),\n                        SimpleDom.el(\n                            'div',\n                            { 'class': 'card-content-action-info' },\n                            SimpleDom.el(\n                                'div',\n                                { 'class': 'progress' },\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'card-content-action-info-start-date' },\n                                    moment(this.userAction.start_date).format('DD/MM')\n                                ),\n                                SimpleDom.el(\n                                    'div',\n                                    { 'class': 'card-content-action-info-end-date' },\n                                    moment(this.userAction.end_date).format('DD/MM')\n                                ),\n                                SimpleDom.el('div', { 'class': 'determinate', style: 'width: ' + this.getUserActionProgress() + '%' })\n                            ),\n                            SimpleDom.el(\n                                'p',\n                                null,\n                                SimpleDom.el(\n                                    'a',\n                                    { 'class': 'hbtn-action tooltip',\n                                        'data-position': 'bottom',\n                                        'data-tooltip': 'Voir les commentaires \\xE0 propros de cette action',\n                                        onclick: function onclick(event) {\n                                            (0, _veil.withVeilAndMessages)(fetchJsonData('/users/actions/' + _this2.userAction.action.id + '/commentaries'), true).then(function (commentaries) {\n                                                return (0, _slider.createSlider)('Commentaires', SimpleDom.el(_commentaries.CommentariesTab, {\n                                                    action: _this2.userAction.action,\n                                                    commentaries: commentaries || []\n                                                }), event, 'lnr lnr-bubble');\n                                            });\n                                        }\n                                    },\n                                    SimpleDom.el(\n                                        'div',\n                                        { 'class': 'action-indicator' },\n                                        this.state.actionsDataCount.commentaries[this.userAction.action_id] || 0\n                                    ),\n                                    SimpleDom.el('span', { 'class': 'lnr lnr-bubble fa-2x' })\n                                ),\n                                SimpleDom.el(\n                                    'a',\n                                    { 'class': 'hbtn-action',\n                                        onclick: function onclick(event) {\n                                            (0, _veil.withVeilAndMessages)(fetchJsonData('/users/actions/' + _this2.userAction.action.id + '/participants'), true).then(function (_ref2) {\n                                                var users = _ref2.users,\n                                                    total_pages = _ref2.total_pages,\n                                                    current_page = _ref2.current_page;\n\n                                                (0, _slider.createSlider)('Participants', SimpleDom.el(_participants.ParticipantTab, {\n                                                    users: users || [],\n                                                    action: _this2.userAction.action,\n                                                    total_pages: total_pages,\n                                                    current_page: current_page\n                                                }), event);\n                                            });\n                                        }\n                                    },\n                                    SimpleDom.el(\n                                        'div',\n                                        { 'class': 'action-indicator' },\n                                        this.state.actionsDataCount.participants[this.userAction.action_id] || 0\n                                    ),\n                                    SimpleDom.el('span', { 'class': 'lnr lnr-users fa-2x' })\n                                ),\n                                SimpleDom.el(\n                                    'a',\n                                    { 'class': 'hbtn-action',\n                                        onclick: function onclick(event) {\n                                            (0, _slider.createSlider)('Ressources', SimpleDom.el(_ressources.RessourcesTab, {\n                                                action: _this2.userAction.action\n                                            }), event);\n                                        } },\n                                    SimpleDom.el(\n                                        'div',\n                                        { 'class': 'action-indicator' },\n                                        this.state.actionsDataCount.ressources[this.userAction.action_id] || 0\n                                    ),\n                                    SimpleDom.el('span', { 'class': 'lnr lnr-book fa-2x' })\n                                )\n                            )\n                        )\n                    ),\n                    SimpleDom.el(\n                        'div',\n                        { 'class': 'card-action' },\n                        SimpleDom.predicate(this.state.selectedDate === moment(new Date()).format('YYYY-MM-DD'), function () {\n                            return SimpleDom.el(\n                                'p',\n                                null,\n                                SimpleDom.predicate(moment(_this2.userAction.last_succeed).format('YYYY-MM-DD') === moment(new Date()).format('YYYY-MM-DD'), function () {\n                                    return SimpleDom.el(\n                                        'div',\n                                        { 'class': 'action-checked' },\n                                        SimpleDom.el(\n                                            'p',\n                                            null,\n                                            SimpleDom.el('span', { 'class': 'fa fa-check-square-o' }),\n                                            ' 1 point gagn\\xE9 !'\n                                        )\n                                    );\n                                }, function () {\n                                    return SimpleDom.el(\n                                        'div',\n                                        { 'class': 'action-to-check' },\n                                        SimpleDom.el(\n                                            'a',\n                                            { href: '#',\n                                                onclick: function onclick(e) {\n                                                    e.preventDefault();\n                                                    (0, _veil.withVeilAndMessages)(fetchJsonData('/users/actions/user-action/done/' + _this2.userAction.id), true).then(function (userAction) {\n                                                        _this2.userAction = userAction;\n                                                        _this2.hasBeenRealised = true;\n                                                        var action = _this2.state.actions.find(function (action) {\n                                                            return action.id === userAction.id;\n                                                        });\n                                                        action.last_succeed = userAction.last_succeed;\n                                                        _this2.store.updateState({}, 'ACTION_CARD_RELOAD_' + _this2.props.userAction.id);\n                                                        var pointCounter = document.getElementsByClassName('point-counter')[0];\n                                                        if (pointCounter) {\n                                                            var str = +pointCounter.innerHTML.split(' ')[0] + 1;\n                                                            pointCounter.innerHTML = str + ' pts';\n                                                        }\n                                                    });\n                                                }\n\n                                            },\n                                            SimpleDom.el('span', { 'class': 'fa fa-check' }),\n                                            ' R\\xE9alis\\xE9 !'\n                                        )\n                                    );\n                                })\n                            );\n                        })\n                    )\n                )\n            );\n        }\n    }], [{\n        key: 'cropTitle',\n        value: function cropTitle(title) {\n            var maxLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n\n            if (title.length > maxLength) {\n                return title.slice(0, maxLength) + '...';\n            }\n            return title;\n        }\n    }, {\n        key: 'formatHours',\n        value: function formatHours(time) {\n            return time.replace('une', '1').replace('un', '1').replace('heure', 'h');\n        }\n    }]);\n\n    return ActionCard;\n}(SimpleDom.Component);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2FjdGlvbnMvYWN0aW9uQ2FyZC9hY3Rpb25DYXJkLmpzPzY4ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtmaWxsVXB0YWcsIGdldFRhZ3NOdW1iZXIsIHVwZGF0ZVNpZGViYXJUYWdzfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxucmVxdWlyZSgnLi4vLi4vaG9tZScpO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5yZXF1aXJlKCdtb21lbnQvbG9jYWxlL2ZyJyk7XG5jb25zdCBmbGF0cGlja3IgPSByZXF1aXJlKFwiZmxhdHBpY2tyXCIpO1xuY29uc3QgZnJhbmNlc2UgPSByZXF1aXJlKFwiZmxhdHBpY2tyL2Rpc3QvbDEwbi9mci5qc1wiKS5mcjtcbmZsYXRwaWNrci5sb2NhbGl6ZShmcmFuY2VzZSk7XG5cbmltcG9ydCAqIGFzIFNpbXBsZURvbSBmcm9tICdzaW1wbGVkb20tY29tcG9uZW50JztcbmltcG9ydCB7IHdpdGhWZWlsQW5kTWVzc2FnZXMgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3ZlaWwvdmVpbCc7XG5pbXBvcnQgeyBjcmVhdGVTbGlkZXIgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3NsaWRlci9zbGlkZXInO1xuaW1wb3J0IHsgQ29tbWVudGFyaWVzVGFiIH0gZnJvbSAnLi4vY29tbWVudGFyaWVzL2NvbW1lbnRhcmllcyc7XG5pbXBvcnQgeyBQYXJ0aWNpcGFudFRhYiB9IGZyb20gJy4uL3BhcnRpY2lwYW50cy9wYXJ0aWNpcGFudHMnO1xuaW1wb3J0IHsgVGFnU2VsZWN0b3IgfSBmcm9tIFwiLi4vdGFnU2VsZWN0b3IvdGFnU2VsZWN0b3JcIjtcbmltcG9ydCB7UmVzc291cmNlc1RhYn0gZnJvbSBcIi4uL3Jlc3NvdXJjZXMvcmVzc291cmNlc1wiO1xuaW1wb3J0IHtBY3Rpb25JbmZvfSBmcm9tIFwiLi4vYWN0aW9uSW5mb1NsaWRlci9hY3Rpb25JbmZvU2xpZGVyXCI7XG5cbmltcG9ydCAnLi4vLi4vY3NzL3BvcG92ZXJzLmxlc3MnO1xuaW1wb3J0ICcuLi8uLi9jc3MvYXZhdGFyLmxlc3MnO1xuaW1wb3J0ICcuL2FjdGlvbkNhcmQubGVzcyc7XG5cbmV4cG9ydCBjbGFzcyBBY3Rpb25DYXJkIGV4dGVuZHMgU2ltcGxlRG9tLkNvbXBvbmVudCB7XG5cbiAgICBldmVudHNUb1N1YnNjcmliZSgpIHtcbiAgICAgICAgcmV0dXJuIFtgQUNUSU9OX0NBUkRfUkVMT0FEXyR7dGhpcy5wcm9wcy51c2VyQWN0aW9uLmlkfWBdO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzLCBzdG9yZSkge1xuICAgICAgICBzdXBlcihwcm9wcywgc3RvcmUpO1xuICAgICAgICB0aGlzLnVzZXJBY3Rpb24gPSB0aGlzLnByb3BzLnVzZXJBY3Rpb247XG4gICAgICAgIHRoaXMuY2FyZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5oYXNCZWVuUmVhbGlzZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyb3BUaXRsZSh0aXRsZSwgbWF4TGVuZ3RoID0gMjApIHtcbiAgICAgICAgaWYgKHRpdGxlLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlLnNsaWNlKDAsIG1heExlbmd0aCkgKyAnLi4uJ1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZm9ybWF0SG91cnModGltZSkge1xuICAgICAgICByZXR1cm4gdGltZS5yZXBsYWNlKCd1bmUnLCAnMScpLnJlcGxhY2UoJ3VuJywgJzEnKS5yZXBsYWNlKCdoZXVyZScsICdoJyk7XG4gICAgfVxuXG4gICAgZ2V0RnVsbFRhZygpIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VyQWN0aW9uLnRhZ3MpXG4gICAgICAgIGNvbnN0IHVzZXJBY3Rpb25UYWdzID0gdGhpcy51c2VyQWN0aW9uLnRhZy5zcGxpdCgnLScpO1xuICAgICAgICBsZXQgdGFncyA9IHRoaXMuc3RhdGUudGFncy5zbGljZSgpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlICh1c2VyQWN0aW9uVGFncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJUYWcgPSB1c2VyQWN0aW9uVGFncy5zaGlmdCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGFnID0gdGFncy5maW5kKHRhZyA9PiAnJyArIHRhZy5pZCA9PT0gY3VyclRhZyk7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh0YXJnZXRUYWcubmFtZSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0VGFnICYmIHRhcmdldFRhZy5zb25zKSB7XG4gICAgICAgICAgICAgICAgdGFncyA9IHRhcmdldFRhZy5zb25zO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcvJyk7XG4gICAgfVxuXG4gICAgZ2V0VXNlckFjdGlvblByb2dyZXNzKCkge1xuICAgICAgICBjb25zdCBhbGxEYXlzID0gbW9tZW50KHRoaXMudXNlckFjdGlvbi5zdGFydF9kYXRlKS5kaWZmKHRoaXMudXNlckFjdGlvbi5lbmRfZGF0ZSwgJ2RheXMnKTtcbiAgICAgICAgY29uc3QgZGF5cyA9IG1vbWVudCh0aGlzLnVzZXJBY3Rpb24uc3RhcnRfZGF0ZSkuZGlmZihtb21lbnQubm93KCksICdkYXlzJyk7XG4gICAgICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLnRydW5jKChkYXlzIC8gYWxsRGF5cykgKiAxMDApO1xuICAgICAgICBjb25zb2xlLmxvZyhwZXJjZW50KTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEwMCwgcGVyY2VudCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBzdHlsZT0gdGhpcy5oYXNCZWVuUmVhbGlzZWQgPyB7J29wYWNpdHknOiAnMCd9IDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9e2BjYXJkLWVkaXQtdGFnLSR7dGhpcy51c2VyQWN0aW9uLmlkfWB9IGNsYXNzPVwibW9kYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQ+Q2hhbmdlciBkZSB0YWc8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8VGFnU2VsZWN0b3IgdGFncz17dGhpcy5nZXRGdWxsVGFnKCl9Lz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cImhidG5cIiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMTBweDsgbWFyZ2luLXRvcDogLTEwcHg7XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYCNjYXJkLWVkaXQtdGFnLSR7dGhpcy51c2VyQWN0aW9uLmlkfWApLm1vZGFsKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHVwZGF0ZVNpZGViYXJUYWdzKHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhWZWlsQW5kTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5mZXRjaEpzb25EYXRhKGAvdXNlcnMvdGFncy9jaGFuZ2UtdGFnLyR7dGhpcy51c2VyQWN0aW9uLmlkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzVG9DcmVhdGU6IHJlc3VsdC50YWdzVG9DcmVhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3NTbHVnOiByZXN1bHQudGFnc1NsdWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4oKHt0YWdzLCB1c2VyX2FjdGlvbn0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyQWN0aW9uLnRhZyA9IHVzZXJfYWN0aW9uLnRhZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbFVwdGFnKHRhZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudEJ5VGFnU2x1ZyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Rlc3QgaWYgdGhlIHVzZXIgaGFzIHBhcnRpY2lwYXRlZCBpbnRvIHRoZSBhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG1heWJlIHVzZXIgYWN0aW9uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VGFnc051bWJlcih0aGlzLnN0YXRlLmFjdGlvbnMsIGNvdW50QnlUYWdTbHVnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50QnlUYWdTbHVnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NJREVCQVJfVE9fVVBEQVRFJywgJ0FDVElPTlNfTElTVF9UT19VUERBVEUnLCAnVElUTEVfVE9fUkVGUkVTSCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIG15LWNhcmRcIiBzdHlsZT17eydvcGFjaXR5JyA6IHRoaXMuaGFzQmVlblJlYWxpc2VkID8gJzEnIDogJzAnfX0gcmVmPXtyZWYgPT4gdGhpcy5jYXJkID0gcmVmfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGJ0bi1hY3Rpb24gbXktY2FyZC1kZWxldGVcIlxuICAgICAgICAgICAgICAgICAgICAgb25jbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhWZWlsQW5kTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5mZXRjaEpzb25EYXRhKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYC91c2Vycy9hY3Rpb25zL3VzZXItYWN0aW9uL2RlbGV0ZS8ke3RoaXMudXNlckFjdGlvbi5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21ldGhvZDogJ0RFTEVURSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmQuY2xhc3NMaXN0LnRvZ2dsZSgndG8tYmUtZGVsZXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQWN0aW9ucyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhY3Rpb24gPT4gYWN0aW9uLmlkICE9PSB0aGlzLnVzZXJBY3Rpb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRBY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhY3Rpb24gPT4gYWN0aW9uLmlkICE9PSB0aGlzLnVzZXJBY3Rpb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnRCeVRhZ1NsdWcgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFRhZ3NOdW1iZXIoYWN0aW9ucywgY291bnRCeVRhZ1NsdWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudEJ5VGFnU2x1Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ1NJREVCQVJfVE9fVVBEQVRFJywgJ0FDVElPTlNfTElTVF9UT19VUERBVEUnLCAnVElUTEVfVE9fUkVGUkVTSCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAmIzEwMDA1O1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWltYWdlIHdhdmVzLWJsb2NrIHdhdmVzLWxpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgIHtTaW1wbGVEb20ucHJlZGljYXRlKHRoaXMudXNlckFjdGlvbi5hY3Rpb24uaW1hZ2VfdXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGRhdGEtZmFuY3lib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1jYXB0aW9uPXt0aGlzLnVzZXJBY3Rpb24uYWN0aW9uLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXt0aGlzLnVzZXJBY3Rpb24uYWN0aW9uLmltYWdlX3VybH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwibG96YWRcIiBzcmM9e3RoaXMudXNlckFjdGlvbi5hY3Rpb24uaW1hZ2VfdXJsfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaW1hZ2UtdGFnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGAjY2FyZC1lZGl0LXRhZy0ke3RoaXMudXNlckFjdGlvbi5pZH1gKS5tb2RhbCgnb3BlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLmdldEZ1bGxUYWcoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50XCIgZGF0YS10b29sdGlwPXt0aGlzLnVzZXJBY3Rpb24uYWN0aW9uLnRpdGxlfT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkLXRpdGxlXCIgc3R5bGU9XCJmb250LXNpemU6IDEuM2VtO1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPXtldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aFZlaWxBbmRNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hKc29uRGF0YShgL3VzZXJzL2FjdGlvbnMvJHt0aGlzLnVzZXJBY3Rpb24uYWN0aW9uX2lkfS9jb21tZW50YXJpZXM/aXNfam91cm5hbD1UcnVlYCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4oY29tbWVudGFyaWVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWN0aW9uSW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJBY3Rpb249e3RoaXMudXNlckFjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzPXt0aGlzLnN0YXRlLnRhZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbEVudHJpZXM9e2NvbW1lbnRhcmllc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtBY3Rpb25DYXJkLmNyb3BUaXRsZSh0aGlzLnVzZXJBY3Rpb24uYWN0aW9uLnRpdGxlLCA0MCl9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGVudC1hY3Rpb24taW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGVudC1hY3Rpb24taW5mby1zdGFydC1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb21lbnQodGhpcy51c2VyQWN0aW9uLnN0YXJ0X2RhdGUpLmZvcm1hdCgnREQvTU0nKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50LWFjdGlvbi1pbmZvLWVuZC1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb21lbnQodGhpcy51c2VyQWN0aW9uLmVuZF9kYXRlKS5mb3JtYXQoJ0REL01NJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGVybWluYXRlXCIgc3R5bGU9e2B3aWR0aDogJHt0aGlzLmdldFVzZXJBY3Rpb25Qcm9ncmVzcygpfSVgfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiaGJ0bi1hY3Rpb24gdG9vbHRpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1wb3NpdGlvbj1cImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10b29sdGlwPVwiVm9pciBsZXMgY29tbWVudGFpcmVzIMOgIHByb3Byb3MgZGUgY2V0dGUgYWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPXtldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhWZWlsQW5kTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaEpzb25EYXRhKGAvdXNlcnMvYWN0aW9ucy8ke3RoaXMudXNlckFjdGlvbi5hY3Rpb24uaWR9L2NvbW1lbnRhcmllc2ApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4oY29tbWVudGFyaWVzID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYENvbW1lbnRhaXJlc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbW1lbnRhcmllc1RhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249e3RoaXMudXNlckFjdGlvbi5hY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRhcmllcz17Y29tbWVudGFyaWVzIHx8IFtdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsbnIgbG5yLWJ1YmJsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24taW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5hY3Rpb25zRGF0YUNvdW50LmNvbW1lbnRhcmllc1t0aGlzLnVzZXJBY3Rpb24uYWN0aW9uX2lkXSB8fCAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsbnIgbG5yLWJ1YmJsZSBmYS0yeFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJoYnRuLWFjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz17ZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoVmVpbEFuZE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hKc29uRGF0YShgL3VzZXJzL2FjdGlvbnMvJHt0aGlzLnVzZXJBY3Rpb24uYWN0aW9uLmlkfS9wYXJ0aWNpcGFudHNgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS50aGVuKCh7IHVzZXJzLCB0b3RhbF9wYWdlcywgY3VycmVudF9wYWdlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgUGFydGljaXBhbnRzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGFydGljaXBhbnRUYWJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnM9e3VzZXJzIHx8IFtdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249e3RoaXMudXNlckFjdGlvbi5hY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX3BhZ2VzPXt0b3RhbF9wYWdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9wYWdlPXtjdXJyZW50X3BhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmFjdGlvbnNEYXRhQ291bnQucGFydGljaXBhbnRzW3RoaXMudXNlckFjdGlvbi5hY3Rpb25faWRdIHx8IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxuciBsbnItdXNlcnMgZmEtMnhcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJoYnRuLWFjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz17ZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUmVzc291cmNlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVzc291cmNlc1RhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj17dGhpcy51c2VyQWN0aW9uLmFjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmFjdGlvbnNEYXRhQ291bnQucmVzc291cmNlc1t0aGlzLnVzZXJBY3Rpb24uYWN0aW9uX2lkXSB8fCAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsbnIgbG5yLWJvb2sgZmEtMnhcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1hY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAge1NpbXBsZURvbS5wcmVkaWNhdGUodGhpcy5zdGF0ZS5zZWxlY3RlZERhdGUgPT09IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtTaW1wbGVEb20ucHJlZGljYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb21lbnQodGhpcy51c2VyQWN0aW9uLmxhc3Rfc3VjY2VlZCkuZm9ybWF0KCdZWVlZLU1NLUREJykgPT09IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gPGRpdiBjbGFzcz1cImFjdGlvbi1jaGVja2VkXCI+PHA+PHNwYW4gY2xhc3M9XCJmYSBmYS1jaGVjay1zcXVhcmUtb1wiLz4gMSBwb2ludCBnYWduw6kgITwvcD48L2Rpdj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IDxkaXYgY2xhc3M9XCJhY3Rpb24tdG8tY2hlY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9eyBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhWZWlsQW5kTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hKc29uRGF0YShgL3VzZXJzL2FjdGlvbnMvdXNlci1hY3Rpb24vZG9uZS8ke3RoaXMudXNlckFjdGlvbi5pZH1gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4odXNlckFjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyQWN0aW9uID0gdXNlckFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc0JlZW5SZWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbiA9IHRoaXMuc3RhdGUuYWN0aW9ucy5maW5kKGFjdGlvbiA9PiBhY3Rpb24uaWQgPT09IHVzZXJBY3Rpb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5sYXN0X3N1Y2NlZWQgPSB1c2VyQWN0aW9uLmxhc3Rfc3VjY2VlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVN0YXRlKHt9LCBgQUNUSU9OX0NBUkRfUkVMT0FEXyR7dGhpcy5wcm9wcy51c2VyQWN0aW9uLmlkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50Q291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BvaW50LWNvdW50ZXInKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnRDb3VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ciA9ICtwb2ludENvdW50ZXIuaW5uZXJIVE1MLnNwbGl0KCcgJylbMF0gKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludENvdW50ZXIuaW5uZXJIVE1MID0gc3RyICsgJyBwdHMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1jaGVja1wiLz4gUsOpYWxpc8OpICFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hY3Rpb25zL2FjdGlvbkNhcmQvYWN0aW9uQ2FyZC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7O0FBbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7Ozs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBOzs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQURBO0FBQUE7QUFNQTtBQUNBO0FBUEE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQTVCQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBTEE7QUEwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQXhCQTtBQUFBO0FBQUE7QUE0QkE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUpBO0FBY0E7QUFsQkE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBakJBO0FBbUJBO0FBbkJBO0FBcUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBRkE7QUFIQTtBQVVBO0FBakJBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQXRCQTtBQXdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBakJBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQXRCQTtBQXlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFEQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBYkE7QUFsREE7QUFWQTtBQXRCQTtBQW9HQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTtBQXFCQTtBQXJCQTtBQUFBO0FBREE7QUFBQTtBQUpBO0FBQUE7QUFGQTtBQXRKQTtBQTNDQTtBQXVPQTs7O0FBL1FBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7OztBQXRCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ })

})